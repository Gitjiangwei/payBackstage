<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="org.hero.renche.mapper.ContractInfoMapper">

    <select id="qryListContractInfo" resultType="org.hero.renche.entity.vo.ContractInfoVo">

        select contract_id as contractId,contract_name as contractName,party_a as partyA,a.companyName as companyNameA,
            contract_no_a as contractNoA,party_b as partyB,b.companyName as companyNameB,contract_no_b as contractNoB,
            contract_status as contractStatus,contract_money as contractMoney,sign_in_time as signInTime,remind_period as remindPeriod,
            contract_type as contractType,remark,require_deploy_time as requireDeployTime,tender_id as tenderId
        from tx_contract_info t
        left join tx_company_info a on t.party_a = a.company_Id
        left join tx_company_info b on t.party_b = b.company_Id
        <trim prefix="where" prefixOverrides="and">
            <if test="ContractInfo.contractName != null and ContractInfo.contractName != '' ">
                and  contract_name like #{ContractInfo.contractName}
            </if>
            <if test="ContractInfo.contractType != null and ContractInfo.contractType != '' ">
                and  contract_type = #{ContractInfo.contractType}
            </if>
            <if test="ContractInfo.partyA != null and ContractInfo.partyA != '' ">
                and  a.company_name  like #{ContractInfo.partyA}
            </if>
            <if test="ContractInfo.partyB != null and ContractInfo.partyB != '' ">
                and  b.company_name like #{ContractInfo.partyB}
            </if>
            <if test="ContractInfo.contractStatus != null and ContractInfo.contractStatus != '' ">
                and  contract_status like #{ContractInfo.contractStatus}
            </if>
            <if test="ContractInfo.contractNoA != null and ContractInfo.contractNoA != '' ">
                and  contract_no_a like #{ContractInfo.contractNoA}
            </if>
            <if test="ContractInfo.contractNoB != null and ContractInfo.contractNoB != '' ">
                and  contract_no_b like #{ContractInfo.contractNoB}
            </if>

        </trim>
        order by t.create_time desc
    </select>

</mapper>